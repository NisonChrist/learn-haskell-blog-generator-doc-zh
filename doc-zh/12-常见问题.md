```markdown
# 常见问题

> 有问题吗？您可以在[讨论区](https://github.com/soupi/learn-haskell-blog-generator/discussions)或[问题跟踪器](https://github.com/soupi/learn-haskell-blog-generator/issues)中提问！

## 一般问题

### 我为什么要学习 Haskell

我写过几篇关于这个主题的文章：

- [考虑 Haskell](https://gilmi.me/blog/post/2020/04/28/consider-haskell)（备用标题，“我能用 Haskell 做什么？”）
- [我从 Haskell 中学到的 7 件事](https://gilmi.me/blog/post/2022/12/13/learned-from-haskell)

### 如何安装编辑器工具

据我所知，目前最推荐的 Haskell 开发设置是使用 VSCode 或 [VSCodium](https://vscodium.com/) 以及市场上的 [Haskell 扩展](https://marketplace.visualstudio.com/items?itemName=haskell.haskell)。

Haskell 扩展使用 [haskell-language-server](https://github.com/haskell/haskell-language-server)，可以通过 [GHCup](https://www.haskell.org/ghcup/) 甚至 Haskell 扩展本身安装。

如果您已经有首选的编辑器，[请查看 HLS 是否支持它](https://haskell-language-server.readthedocs.io/en/latest/configuration.html#configuring-your-editor)，或者使用 [GHCid](https://github.com/ndmitchell/ghcid#readme)，它独立于编辑器提供快速反馈。

### 如何学习新事物

Haskell 社区不断前进，开发新的库、工具和技术，并为旧概念创建新材料。[Haskell 天文馆](https://haskell.pl-a.net)将来自多个社区的提要聚合到一个页面，以及一份 [Haskell 每周通讯](https://haskellweekly.news/)。您可能还会在 [Fediverse](https://fosstodon.org/tags/haskell) 上发现相当多的 Haskell 内容！

## 调试

### 如何调试 Haskell 代码

大多数命令式语言都提供单步调试器。虽然 [GHCi 调试器](https://downloads.haskell.org/ghc/latest/docs/users_guide/ghci.html#the-ghci-debugger)存在，但它并不特别容易使用，尤其是因为 Haskell 的惰性求值，其中事物的求值顺序可能与我们直观预期的不同。因此，Haskeller 倾向于使用[跟踪调试](https://hackage.haskell.org/package/base-4.16.4.0/docs/Debug-Trace.html#g:1)和等式推理。通过跟踪调试，我们尝试*验证我们对代码的假设*——我们使用各种 `trace` 函数作为一种“技巧”来打印变量、函数输入、函数输出，甚至只是从代码的任何地方说“到这里了”。

在发现与我们的假设不符的东西（例如函数的意外输入或输出）后，我们尝试思考哪段代码可能导致了这种差异，甚至再次使用跟踪调试来精确定位确切位置，并尝试使用“等式推理”来评估违背我们期望的有问题的代码。如果很容易做到，我们也会尝试在 `ghci` 中使用不同的输入运行该函数来检查我们的假设。

因为 Haskell 专注于不可变性、可组合性以及使用类型来消除许多类别的可能错误，所以“局部推理”成为可能，跟踪调试成为调试 Haskell 程序的有效策略。

### 如何理解类型错误

GHC 类型错误通常不是最友好的错误消息，但它们是善意的！它们只是想帮助我们发现代码中的不一致之处——通常与类型使用有关，它们帮助我们避免犯错。

当您遇到错误消息时，请先仔细阅读它们，直到您习惯它们，然后再阅读错误消息提示的有问题的代码。随着您经验的积累，错误中最重要的部分很可能是问题代码的位置，通过阅读代码，我们可以在没有实际错误消息的情况下找到错误。

添加类型签名和注释来测试您对类型的理解也很有帮助。我们甚至可以通过使用[类型空洞](https://downloads.haskell.org/ghc/latest/docs/users_guide/exts/typed_holes.html)来询问 GHC 在某个地方的预期类型。

### 我的程序很慢。为什么？

可能有多种原因。从低效的算法或[不适合](https://github.com/soupi/haskell-study-plan#data-structures)任务的数据结构（就常见操作的时间复杂度而言），到效率较低的内存表示（再次提醒，在大多数情况下使用 `Text` 而不是 `String`），以及惰性问题（同样是求值策略！）。

我的 Haskell 学习计划中的[性能部分](https://github.com/soupi/haskell-study-plan#performance)链接到有关 Haskell 求值、分析和案例研究的各种资源。

## 设计

### 如何构建程序

从命令式外壳函数式核心方法开始，如果需要，使用组合子模式为逻辑定义 EDSL，如果需要，在本地使用 `State` 等功能，也许使用 `ReaderT` 添加环境配置，然后看看效果如何。

如果该方法失败了，请查看失败的原因并根据您的需要检查其他解决方案。

### 如何建模数据

使用 ADT 建模数据通常是可行的方法。通常，来自面向对象背景的程序员倾向于将类型类视为定义类似于继承的方法的方式，但这通常不是正确的方法，具有不同构造函数的 ADT 用于不同的替代方案可以走很长的路。请记住，即使是 OOP 人士也经常提倡组合优于继承。

使用函数来定义数据上的行为，而不是试图将两者耦合在一起。
```