# 自定义标记语言

在本章中，我们将定义自己的简单标记语言，并将用这种语言编写的文档解析为 Haskell 数据结构。

我们的标记语言将包含以下特性：

- 标题：以一定数量的 `*` 字符为前缀
- 段落：一组没有空行的行
- 无序列表：一组行，每行以 `- ` 为前缀
- 有序列表：一组行，每行以 `# ` 为前缀
- 代码块：一组行，每行以 `> ` 为前缀

这是一个示例文档：

```org
* 使用 ghc 编译程序

运行 ghc 会调用 Glasgow Haskell 编译器（GHC），
可用于将 Haskell 模块和程序编译为本地可执行文件和库。

创建一个名为 hello.hs 的新 Haskell 源文件，并在其中写入
以下代码：

> main = putStrLn "你好，Haskell！"

现在，我们可以通过使用文件名调用 ghc 来编译程序：

> ➜ ghc hello.hs
> [1 of 1] Compiling Main             ( hello.hs, hello.o )
> Linking hello ...

GHC 创建了以下文件：

- hello.hi - Haskell 接口文件
- hello.o - 目标文件，链接前编译器的输出
- hello（在 Microsoft Windows 上为 hello.exe）- 本地可运行的可执行文件。

当源文件满足以下两个条件时，GHC 将生成可执行文件：

# 在源文件中定义 main 函数
# 将模块名称定义为 Main 或不包含模块声明

否则，它只会生成 .o 和 .hi 文件。
```

我们最终会将其转换为（格式除外）以下 HTML：

```html
<h1>使用 ghc 编译程序</h1>

<p>运行 ghc 会调用 Glasgow Haskell 编译器（GHC），
可用于将 Haskell 模块和程序编译为本地可执行文件和库。
</p>

<p>创建一个名为 hello.hs 的新 Haskell 源文件，并在其中写入
以下代码：
</p>

<pre>main = putStrLn "你好，Haskell！"
</pre>

<p>现在，我们可以通过使用文件名调用 ghc 来编译程序：</p>

<pre>
➜ ghc hello.hs
[1 of 1] Compiling Main             ( hello.hs, hello.o )
Linking hello ...
</pre>

<p>GHC 创建了以下文件：
</p>

<ul>
  <li>hello.hi - Haskell 接口文件</li>
  <li>hello.o - 目标文件，链接前编译器的输出</li>
  <li>hello（在 Microsoft Windows 上为 hello.exe）- 本地可运行的可执行文件。</li>
</ul>

<p>当源文件满足以下两个条件时，GHC 将生成可执行文件：
</p>

<ol>
  <li>在源文件中定义 main 函数</li>
  <li>将模块名称定义为 Main，或不包含模块声明</li>
</ol>

<p>否则，它只会生成 .o 和 .hi 文件。
</p>
``` 