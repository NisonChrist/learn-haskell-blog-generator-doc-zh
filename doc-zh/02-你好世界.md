# 你好，世界！

在本章中，我们将创建一个简单的 HTML "hello world" 程序，并使用 Haskell 工具链来编译和运行它。

> 如果您还没有安装 Haskell 工具链，请访问
> [haskell.org/downloads](https://haskell.org/downloads) 获取如何下载和安装 Haskell 工具链的说明。

## Haskell 源文件

Haskell 源文件由定义组成。

最常见的定义形式如下：

```hs
<名称> = <表达式>
```

请注意：

1. 名称必须以小写字母开头
2. 我们不能在同一个文件中多次使用相同的名称

包含 `main` 名称定义的源文件可以被视为可执行文件，而 `main` 绑定的表达式是程序的入口点。

让我们创建一个名为 `hello.hs` 的新 Haskell 源文件，并在其中写入以下行：

```hs
main = putStrLn "<html><body>你好，世界！</body></html>"
```

我们定义了一个新名称 `main`，并将其绑定到表达式 `putStrLn "<html><body>你好，世界！</body></html>"`。

`main` 的主体意味着调用函数 `putStrLn`，并将字符串 `"<html><body>你好，世界！</body></html>"` 作为输入。`putStrLn` 接受单个字符串作为输入，并将该字符串打印到标准输出。

__注意__：在 Haskell 中，我们不需要使用括号来传递参数给函数。

运行这个程序将在屏幕上打印以下文本：

```
<html><body>你好，世界！</body></html>
```

请注意，我们不能只写 `putStrLn "<html><body>你好，世界！</body></html>"` 而不带 `main =` 部分，因为它不是一个定义。这在 Python 和 OCaml 等语言中是允许的，但在 Haskell 或 C 中是不允许的。

## 编译程序

要运行这个小程序，我们可以使用命令行程序 `ghc` 来编译它：

```sh
> ghc hello.hs
[1 of 1] Compiling Main             ( hello.hs, hello.o )
Linking hello ...
```

使用 `hello.hs` 调用 `ghc` 将创建以下工件文件：

1. `hello.o` - 目标文件
2. `hello.hi` - Haskell 接口文件
3. `hello` - 本地可执行文件

编译后，我们可以运行 `hello` 可执行文件：

```sh
> ./hello
<html><body>你好，世界！</body></html>
```

## 解释程序

或者，我们可以跳过编译和创建工件文件的阶段，直接使用命令行程序 `runghc` 运行源文件：

```sh
> runghc hello.hs
<html><body>你好，世界！</body></html>
```

我们还可以将程序的输出重定向到文件，然后在 Firefox 中打开它。

```sh
> runghc hello.hs > hello.html
> firefox hello.html
```

这个命令应该会打开 Firefox 并显示一个包含 `你好，世界！` 的网页。

我建议在本教程中使用 `runghc`。虽然编译会产生明显更快的程序，但在我们开发和进行频繁更改时，解释程序可以为我们提供更快的反馈。

> 如果您想了解更多关于 Haskell 核心工具的信息，可以阅读
> [这篇文章](https://gilmi.me/blog/post/2021/08/14/hs-core-tools)，
> 但上面描述的内容目前足够我们使用了。

## 更多绑定

我们可以将传递给 `putStrLn` 的 HTML 字符串定义在一个新名称中，而不是直接传递给 `putStrLn`。将上面定义的 `hello.hs` 文件内容更改为：

```hs
main = putStrLn myhtml

myhtml = "<html><body>你好，世界！</body></html>"
```

__注意__：我们声明绑定的顺序并不重要。 